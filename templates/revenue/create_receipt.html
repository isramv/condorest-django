{% extends 'base.html' %}
{% load static humanize %}

{% block content %}
<h1>{{ lot.name }} <small>{{ lot.address }}</small></h1>

<div class="row">

    <div class="col-md-8">
        <h4>Pending fees</h4>
        <!-- fees -->
        <table id="fees" class="table table-striped table-bordered table-hover table-sm" style="width: auto">
        <thead>
            <tr>
                <th>Date</th>
                <th>Fee</th>
                <th>Payment</th>
                <th>Balance</th>
            </tr>
        </thead>
        <tbody>
        {% for fee in fees %}
            <tr class="fee-row">
                <td><samp class="fee-date">{{ fee.date|date:"b Y" }}</samp></td>
                <td class="text-right"><samp class="fee-amount">{{ fee.amount|intcomma }}</samp></td>
                <td class="text-right"><samp class="fee-payment"></samp></td>
                <td class="text-right"><samp class="fee-balance">{{ fee.balance|intcomma }}</samp></td>
            </tr>
        {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <th><samp>Total</samp></th>
                <th class="text-right"><samp class="fee-amount-total">{{ balance|intcomma }}</samp></th>
                <th class=""><samp class="fee-payment-total"><input class="text-right" title="amount" style="width: 120px"></samp></th>
                <th class="text-right"><samp class="fee-balance-total">{{ balance|intcomma }}</samp></th>
            </tr>
        </tfoot>
        </table>
    </div>

    <div class="col-md-4">
        <h4>Receipt history</h4>
        <!-- receips -->
        {% for receipt in receipts %}
        <div class="row">
            <div class="col">{{ receipt.date|date:"Y-m-d" }}</div>
            <div class="col text-right"><strong>{{ receipt.amount|intcomma }}</strong></div>
        </div>
        <div>{{ receipt.details|linebreaks }}</div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block javascript %}
    <script src="{% static 'js/create_receipt.js' %}"></script>
{% endblock %}
